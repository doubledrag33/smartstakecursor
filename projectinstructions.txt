# Titolo
SmartStake – Contabilità scommesse (clone di BetAnalytix)

# Obiettivi business
• Validare entro 3 mesi con retention D7 ≥ 30 % e ≥ 1 000 scommesse registrate  
• Monetizzazione: tier Pro + referral che regala 1 mese gratis (una sola volta)

# Target utente
Scommettitori sportivi semi-pro (20-50 anni) – Europa & resto del mondo – desktop + mobile-web + PWA iOS.

# Stack
Frontend: Next.js 14 App Router + TypeScript + Tailwind + shadcn/ui  
Backend: Supabase (PostgreSQL, Auth, Storage)  
OCR: Tesseract.js in edge-function (fallback Vision API)  
AI: GPT-4o - parsing naturale dell’evento & classificazione sport/lega  
Results feed: SportdataAPI o The-Odds-API per verifica outcome  
DevOps: Vercel + GitHub Actions + Playwright

# Funzionalità core (P0)
1. **Auth** OAuth Google/Apple + magic-link + 2FA facoltativa  
2. **Bet Entry CRUD**  
   • Inserimento manuale singolo  
   • Upload batch (fino a 50 foto) → OCR+AI → autocompilazione riga scommessa  
   • Campi: stake, odds, bookmaker, sport, evento (es. “Sinner vs Alcaraz”), mercato, stato  
3. **Auto-verifica**  
   • All’insert chiama feed risultati → se concluso ⇒ stato WON/LOST, altrimenti PENDING  
   • Bottone “Verifica pending” esegue batch check (rate-limit safe)  
4. **Dash & Filter**  
   • Tabelle filtrabili per giorno / settimana / mese / anno + ricerca full-text  
   • Row expandable: click → modal fullscreen con tutti i dettagli + foto originale  
   • KPI: ROI, yield, profit/loss cumulato e per sport/bookmaker  
5. **Multi-bankroll**  
   • Crea N bankroll, switcher nell’header  
   • Ogni bankroll ha UUID pubblico read-only → link condivisibile, no auth write  
6. **Referral**  
   • Genera referral-link univoco → al primo signup valido accredita 1 mese gratis  
7. **i18n**  
   • Selettore lingua; default in base a browser; iniziale IT & EN; facile estensione

# Funzionalità P1
- Import/export CSV Betfair / Pinnacle  
- Multi-valuta con FX live  
- Notifiche push per eventi prossimi alla chiusura  
- Report fiscale mensile (CSV)

# Design & UX
Palette: #003049 primary · #D62828 accent · #F77F00 highlight  
Dark-mode default, mobile-first 375 px breakpoint, WCAG 2.1 AA, LCP < 2.5 s 4G.

# Vincoli
- GDPR & cifratura a riposo (dati finanziari)  
- Tutte le API < 300 ms in localhost  
- Lighthouse mobile ≥ 90 / 100  
- Test coverage ≥ 80 %

# Deliverables
• Repo Git con README “1-click deploy” Vercel  
• CI pipeline: lint, type-check, unit, e2e, build  
• Diagramma PlantUML architettura  
• Dataset seed: 2 utenti demo + 3 bankroll + 50 scommesse campione

# Milestones consigliate
1. Scaffold + Auth  
2. DB schema + Bet CRUD + OCR pipeline  
3. Auto-verifica + dashboard & filtri  
4. Multi-bankroll + referral  
5. Hardening, test, deploy staging

# Done means
App online su dominio staging, account demo, video demo ≤ 3 min.
